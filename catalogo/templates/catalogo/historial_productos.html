{% extends "homepage/base.html" %}

{% block content %}
<div class="container">
  <h2 class="text-center">Historial de productos</h2>

  <div class="row">
    <!-- Solicitudes Enviadas -->
    <div class="col-md-6" id="solicitudesEnviadas">
      <ul class="list-group">
        {% for producto in catalogo %}
          <li class="list-group-item">
            <div id="carouselExample" class="carousel slide mb-4">
              <div class="carousel-inner">
                  <div class="carousel-item active">
                      <img src="{{ producto.imagen_principal.url }}" class="d-block w-100" alt="...">
                  </div>
                  {% if producto.imagen_extra1 %}
                  <div class="carousel-item">
                      <img src="{{ producto.imagen_extra1.url }}" class="d-block w-100" alt="...">
                  </div>
                  {% endif %}
                  {% if producto.imagen_extra2 %}
                  <div class="carousel-item">
                      <img src="{{ producto.imagen_extra2.url }}" class="d-block w-100" alt="...">
                  </div>
                  {% endif %}
                  {% if producto.imagen_extra3 %}
                  <div class="carousel-item">
                      <img src="{{ producto.imagen_extra3.url }}" class="d-block w-100" alt="...">
                  </div>
                  {% endif %}
              </div>
              <button class="carousel-control-prev" type="button" data-bs-target="#carouselExample" data-bs-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Previous</span>
              </button>
              <button class="carousel-control-next" type="button" data-bs-target="#carouselExample" data-bs-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="visually-hidden">Next</span>
              </button>
          </div>
            <strong>Nombre:</strong> {{ producto.nombre }} <br>
            <strong>Descripcion:</strong> {{ producto.descripcion }} <br>
            {% if request.user.is_superuser %}
            <a href="{% url 'restaurar_producto' slug=producto.slug %}" class="btn btn-danger btn-sm mt-2" onclick="return confirm('¿Estás seguro de que deseas restaurar este producto?');">Restaurar</a>
            {% endif %}
          </li>
        {% empty %}
          <li class="list-group-item">No hay productos en el historial.</li>
        {% endfor %}
      </ul>
    </div>

    {% endblock %}